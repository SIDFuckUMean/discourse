## Configuration options for the base intermediate schema generator
##
## After modifying this file, regenerate the base intermediate schema
## by running the `generate_schema` script

output_directory: ../common/intermediate_db_schema
output_filename: 000_base_schema.sql

## Tables to include in the generated base intermidate schema.
##
## Available table options:
## ignore:      List of columns to ingore
## primary_key: Literal or list of columns to use as primary
## extend:      A list of objects describing new columns to added. Add a new column
##              or transform an existing one
## indexes:     List of indexes to create
tables:
  users:
    ignore:
      - seen_notification_id
      - last_posted_at
      - password_hash
      - salt
      - active
      - last_emailed_at
      - approved_by_id
      - previous_visit_at
      - suspended_at
      - suspended_till
      - views
      - flag_level
      - ip_address
      - title
      - uploaded_avatar_id
      - locale
      - primary_group_id
      - first_seen_at
      - silenced_till
      - group_locked_trust_level
      - manual_locked_trust_level
      - secure_identifier
      - flair_group_id
      - last_seen_reviewable_id
      - password_algorithm
      - username_lower
    extend:
      - name: email
      - name: created_at
        "null": true
      - name: staged
        "null": true
      - name: avatar_path
      - name: avatar_url
      - name: avatar_upload_id
      - name: bio
      - name: password
        "null": true
      - name: trust_level
        "null": true
      - name: suspension
      - name: location
      - name: website
      - name: old_relative_url
      - name: sso_record
      - name: anonymized
        type: boolean
      - name: original_username
      - name: timezone
      - name: email_level
        type: integer
      - name: email_messages_level
        type: integer
      - name: email_digests
        type: boolean
  categories:
    ignore:
      - topic_id
      - topic_count
      - user_id
      - topics_year
      - topics_month
      - topics_week
      - auto_close_hours
      - post_count
      - latest_post_id
      - latest_topic_id
      - posts_year
      - posts_month
      - posts_week
      - email_in
      - email_in_allow_strangers
      - topics_day
      - posts_day
      - allow_badges
      - name_lower
      - auto_close_based_on_last_post
      - topic_template
      - contains_messages
      - sort_order
      - sort_ascending
      - uploaded_logo_id
      - uploaded_background_id
      - topic_featured_link_allowed
      - all_topics_wiki
      - show_subcategory_list
      - num_featured_topics
      - default_view
      - subcategory_list_style
      - default_top_period
      - mailinglist_mirror
      - minimum_required_tags
      - navigate_to_first_post_after_read
      - search_priority
      - allow_global_tags
      - reviewable_by_group_id
      - read_only_banner
      - default_list_filter
      - allow_unlimited_owner_edits_on_first_post
      - default_slow_mode_seconds
      - uploaded_logo_dark_id
      - uploaded_background_dark_id
    extend:
      - name: about_topic_title
      - name: old_relative_url
      - name: existing_id
        type: integer
      - name: permissions
        type: json_text # JSON_TEXT ???
      - name: logo_upload_id
      - name: tag_group_ids
        type: json_text # JSON_TEXT ???
  # tags: {}
  # topics: {}
  # groups: {}
  # posts: {}
  # badges: {}
  # uploads: {}
  # group_members:
  #   virtual: true
  #   primary_key: [group_id, user_id]
  #   extend:
  #     - name: group_id
  #       type: integer
  #     - name: user_id
  #       type: integer
  #     - name: owner
  #       type: boolean
## Schema-wide column configuration options. These options apply to all tables.
## See table specific column configuration options above.
##
## Available Options:
## ignore:  List of core/plugin?? table columns to ignore and exclude from intermidate schema.
columns:
  ignore:
    - updated_at